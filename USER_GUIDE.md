# マルチテナントSaaSシステム ユーザーガイド

## 目次

1. [システム概要](#システム概要)
2. [ユーザーロールと権限](#ユーザーロールと権限)
3. [ログイン方法](#ログイン方法)
4. [スーパー管理者向けガイド](#スーパー管理者向けガイド)
5. [事業所管理者向けガイド](#事業所管理者向けガイド)
6. [スタッフ向けガイド](#スタッフ向けガイド)
7. [よくある質問](#よくある質問)

---

## システム概要

carepassは、複数の事業所が安全に利用できるマルチテナントSaaSシステムです。各事業所のデータは完全に分離されており、権限のないユーザーはアクセスできません。

### 主な機能

- **利用者管理**: 利用者の基本情報、受給者番号、生年月日などを管理
- **職員管理**: 職員の基本情報、契約情報を管理
- **勤務実績管理**: 職員の勤務時間、勤務内容を記録
- **進捗・評価管理**: 利用者の進捗状況、評価を記録
- **事業所管理**: 事業所の基本情報を管理

---

## ユーザーロールと権限

### 1. スーパー管理者（super_admin）

**権限:**
- 全事業所のデータにアクセス可能
- 全てのモデルの閲覧、追加、変更、削除が可能
- ユーザーの作成・編集・削除が可能
- 事業所の作成・編集・削除が可能

**用途:**
- システム全体の管理
- 新規事業所の追加
- ユーザーアカウントの管理

### 2. 事業所管理者（location_admin）

**権限:**
- 自分の事業所のデータのみアクセス可能
- 利用者、職員、勤務実績、進捗・評価の閲覧、追加、変更、削除が可能
- 他の事業所のデータは閲覧不可

**用途:**
- 事業所内のデータ管理
- 利用者・職員の登録
- 勤務実績の確認

### 3. スタッフ（staff）

**権限:**
- 自分の事業所のデータのみアクセス可能
- 利用者、職員、勤務実績、進捗・評価の閲覧、追加、変更が可能
- 削除権限なし

**用途:**
- 日常的なデータ入力
- 勤務実績の記録
- 進捗・評価の記録

---

## ログイン方法

### 1. 管理画面へのアクセス

本番環境のURL + `/admin/` にアクセスします。

例: `https://carepass-xxxx.onrender.com/admin/`

### 2. ログイン情報の入力

- **ユーザー名**: 管理者から提供されたユーザー名
- **パスワード**: 管理者から提供されたパスワード

### 3. 初回ログイン後の推奨事項

- パスワードの変更（右上の「CHANGE PASSWORD」から）
- メールアドレスの確認

---

## スーパー管理者向けガイド

### 新規事業所の追加

1. 管理画面にログイン
2. 「事業所」をクリック
3. 右上の「ADD 事業所」をクリック
4. 以下の情報を入力:
   - 事業所コード（例: TOKYO01）
   - 事業所名（例: 東京事業所）
   - 住所、電話番号、メールアドレスなど
5. 「保存」をクリック

### 新規ユーザーの作成

1. 管理画面にログイン
2. 「ユーザー」をクリック
3. 右上の「ADD ユーザー」をクリック
4. 以下の情報を入力:
   - ユーザー名
   - パスワード
   - ロール（super_admin / location_admin / staff）
   - 所属事業所（location_adminとstaffの場合）
   - メールアドレス
5. 「保存」をクリック

### 全事業所のデータ確認

1. 管理画面にログイン
2. 「利用者」をクリック
3. 全事業所の利用者が表示される
4. フィルターで特定の事業所のみ表示可能

---

## 事業所管理者向けガイド

### 新規利用者の登録

1. 管理画面にログイン
2. 「利用者」をクリック
3. 右上の「ADD 利用者」をクリック
4. 以下の情報を入力:
   - 利用者コード（例: USER001）
   - 氏名
   - 生年月日
   - 受給者番号
   - 所属事業所（自動的に自分の事業所が設定される）
5. 「保存」をクリック

### 職員の登録

1. 管理画面にログイン
2. 「職員」をクリック
3. 右上の「ADD 職員」をクリック
4. 以下の情報を入力:
   - 職員コード（例: STAFF001）
   - 氏名
   - 所属事業所（自動的に自分の事業所が設定される）
5. 「保存」をクリック

### 勤務実績の確認

1. 管理画面にログイン
2. 「勤務実績」をクリック
3. 自分の事業所の勤務実績のみが表示される
4. フィルターで特定の職員や日付で絞り込み可能

### データのエクスポート

1. 管理画面にログイン
2. エクスポートしたいモデル（例: 利用者）をクリック
3. エクスポートしたいレコードを選択
4. アクション欄で「Export selected items」を選択
5. 「Go」をクリック

---

## スタッフ向けガイド

### 勤務実績の記録

1. 管理画面にログイン
2. 「勤務実績」をクリック
3. 右上の「ADD 勤務実績」をクリック
4. 以下の情報を入力:
   - 職員（自分の事業所の職員のみ選択可能）
   - 勤務日
   - 勤務開始時刻
   - 勤務終了時刻
   - 勤務内容
5. 「保存」をクリック

### 進捗・評価の記録

1. 管理画面にログイン
2. 「進捗・評価」をクリック
3. 右上の「ADD 進捗・評価」をクリック
4. 以下の情報を入力:
   - 利用者（自分の事業所の利用者のみ選択可能）
   - 評価日
   - 評価内容
   - 備考
5. 「保存」をクリック

### 利用者情報の確認

1. 管理画面にログイン
2. 「利用者」をクリック
3. 自分の事業所の利用者のみが表示される
4. 利用者名をクリックして詳細を確認

---

## よくある質問

### Q1: 他の事業所のデータが見えないのはなぜですか？

**A:** セキュリティとプライバシー保護のため、各ユーザーは自分の事業所のデータのみアクセスできます。これにより、事業所間のデータが完全に分離されています。

### Q2: パスワードを忘れた場合はどうすればいいですか？

**A:** システム管理者（スーパー管理者）に連絡してパスワードのリセットを依頼してください。

### Q3: 新しい職員を追加したいのですが、どうすればいいですか？

**A:** 
- **事業所管理者の場合:** 管理画面から直接追加できます。
- **スタッフの場合:** 事業所管理者に依頼してください。

### Q4: 誤ってデータを削除してしまいました。復元できますか？

**A:** 
- **スタッフの場合:** 削除権限がないため、誤削除は発生しません。
- **事業所管理者の場合:** システム管理者に連絡してバックアップからの復元を依頼してください。

### Q5: 複数の事業所に所属することはできますか？

**A:** 現在のシステムでは、各ユーザーは1つの事業所にのみ所属できます。複数の事業所でアクセスが必要な場合は、事業所ごとに別のアカウントを作成してください。

### Q6: スマートフォンからアクセスできますか？

**A:** はい、管理画面はレスポンシブデザインに対応しており、スマートフォンやタブレットからもアクセスできます。

### Q7: データのバックアップはどのように行われていますか？

**A:** データベースは自動的にバックアップされています。詳細はシステム管理者にお問い合わせください。

### Q8: 新しい機能の追加を依頼できますか？

**A:** はい、システム管理者またはプロジェクトマネージャーに機能追加のリクエストを提出してください。

---

## サポート

### 技術的な問題

システムにログインできない、エラーが発生するなどの技術的な問題が発生した場合は、以下の情報を含めてシステム管理者に連絡してください：

- ユーザー名
- 発生した問題の詳細
- エラーメッセージ（ある場合）
- 問題が発生した日時
- 使用しているブラウザとデバイス

### 操作方法の質問

システムの使い方がわからない場合は、まずこのユーザーガイドを参照してください。それでも解決しない場合は、事業所管理者またはシステム管理者に連絡してください。

---

## セキュリティに関する注意事項

### パスワード管理

- パスワードは定期的に変更してください（推奨: 3ヶ月ごと）
- パスワードは他人と共有しないでください
- 推測されにくい複雑なパスワードを使用してください

### ログアウト

- 作業が終わったら必ずログアウトしてください
- 共用のコンピューターを使用する場合は特に注意してください

### データの取り扱い

- 個人情報を含むデータは慎重に取り扱ってください
- データを外部に持ち出す場合は、事業所管理者の許可を得てください
- スクリーンショットや印刷物は適切に管理してください

---

## 更新履歴

- **2025年12月27日**: 初版作成
  - マルチテナントシステムの実装に伴いユーザーガイドを作成

---

## お問い合わせ

ご不明な点がございましたら、システム管理者までお問い合わせください。

**システム管理者連絡先:**
- メール: [管理者メールアドレス]
- 電話: [管理者電話番号]
